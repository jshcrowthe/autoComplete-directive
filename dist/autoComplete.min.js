!function(e){e.module("fsAutoComplete-directive",["fsAutoComplete-service"]).directive("autoComplete",["autoCompleteService",function(e){function t(t,o,n,i){i.$parsers.unshift(function(i){return console.log("viewValue:",i),o.autocomplete({source:function(t,o){return e.getSuggestions(i,n.autoComplete||"date").then(function(e){return o(e)})},select:function(e,o){return t.value=o.item.value,"function"==typeof t.onselect&&t.onselect({value:o.item.value}),o.item.value},minLength:2}),i})}return"object"==typeof FS&&"object"==typeof FS.File&&"function"==typeof FS.File.loadCSS&&FS.File.loadCSS("jquery.autocomplete-1.10.4.css"),{restrict:"A",scope:{value:"=ngModel",onselect:"&"},replace:!1,require:"ngModel",link:t}}]),e.module("fsAutoComplete",["fsAutoComplete-directive"]),e.module("fsAutoComplete-service",[]).service("autoCompleteService",["$http","$q",function(e,t){this.getSuggestions=function(o,n){function i(e){return e?Array.isArray(e.normalized)?e.normalized[0]:e.normalized:null}function a(e){return!!e}var l,s=t.defer();l=window.location.host.split(".")[0].indexOf("beta")>-1||window.location.host.split(".")[0].indexOf("localhost")>-1?"https://apibeta.familysearch.org/authorities/v1/":"https://api.familysearch.org/authorities/v1/";var r,u={de:"Keine der oben genannten",en:"None of the Above",es:"Ninguna de las anteriores",fr:"Aucune de ces réponses",it:"Nessuno dei precedenti",pt:"Nenhuma das opções acima",ru:"Ни один из вышеперечисленного",ja:"上記のどれでもない",ko:"해당 사항 없음",zh:"以上都不是"},c=FS.Cookie.getCookie("fssessionid");"date"===n?r=l+'date?date="'+o+'"':"place"===n?r=l+'place?place="'+o+'"&view=simple&filter=true':"name"===n&&(r=l+'name?name="'+o+'"'),r+="&sessionId="+c,r+="&locale="+FS.simpleLocale();var p=[];return e({url:r,method:"GET",headers:{"Content-Type":"application/json"},data:{}}).success(function(e){return"date"===n?e.dates&&0!==e.dates.count?(p=e.dates.date.map(i).filter(a),p.push(u[FS.simpleLocale()]),s.resolve(p)):s.resolve([]):"place"===n?e.places&&0!==e.places.count?(p=e.places.place.map(i).filter(a),p.push(u[FS.simpleLocale()]),s.resolve(p)):s.resolve([]):void 0}).error(function(e){s.reject(e)}),s.promise}}])}(angular);